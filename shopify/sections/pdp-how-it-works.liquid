{% liquid
  assign offer_mode = section.settings.offer_mode
  if offer_mode == 'auto'
    if product.tags contains 'trio'
      assign offer_mode = 'trio'
    else
      assign offer_mode = 'single'
    endif
  endif
  assign display_for = section.settings.display_for
  assign should_render = false
  if display_for == 'all' or display_for == offer_mode
    assign should_render = true
  endif
%}

{% if should_render %}
<section class="pdp-how-it-works" data-offer-mode="{{ offer_mode }}">
  <h2>{{ section.settings.heading }}</h2>
  <p>{{ section.settings.process_line }}</p>
  <ol>
    <li>{{ section.settings.step_1 }}</li>
    <li>{{ section.settings.step_2 }}</li>
    <li>{{ section.settings.step_3 }}</li>
  </ol>
</section>
{% endif %}

{% schema %}
{
  "name": "PDP How It Works",
  "settings": [
    { "type": "select", "id": "offer_mode", "label": "Offer mode", "default": "auto", "options": [
      { "value": "auto", "label": "Auto" },
      { "value": "single", "label": "Single" },
      { "value": "trio", "label": "Trio" }
    ]},
    { "type": "select", "id": "display_for", "label": "Display for", "default": "all", "options": [
      { "value": "all", "label": "All" },
      { "value": "single", "label": "Single" },
      { "value": "trio", "label": "Trio" }
    ]},
    { "type": "text", "id": "heading", "label": "Heading", "default": "How it works" },
    { "type": "text", "id": "process_line", "label": "Core process line", "default": "Download -> Print -> Frame" },
    { "type": "text", "id": "step_1", "label": "Step 1", "default": "Download — Access your files instantly after checkout." },
    { "type": "text", "id": "step_2", "label": "Step 2", "default": "Print — Use your home printer, local print shop, or online print service." },
    { "type": "text", "id": "step_3", "label": "Step 3", "default": "Frame — Choose your frame sizes using the included ratio guide and enjoy your finished wall." }
  ],
  "presets": [{ "name": "PDP How It Works" }]
}
{% endschema %}
